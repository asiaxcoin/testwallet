<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WalletConnect ID Tester</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen">

    <div class="bg-white p-8 rounded-lg shadow-md w-96 text-center">
        <h1 class="text-2xl font-bold mb-6 text-blue-600">WalletConnect Test</h1>
        
        <div id="status-box" class="mb-4 p-2 text-sm rounded bg-yellow-100 text-yellow-700">
            Wallet Not Connected
        </div>

        <button id="connect-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full w-full transition">
            Connect2 Wallet
        </button>

        <div id="account-info" class="mt-6 hidden text-left">
            <p class="text-xs text-gray-500 uppercase font-bold">Address:</p>
            <p id="wallet-address" class="text-sm break-all font-mono bg-gray-50 p-2 rounded mt-1"></p>
        </div>
    </div>

    <script type="module">
        // Hum AppKit (Web3Modal) use kar rahe hain jo WalletConnect ka latest version hai
        import { createWeb3Modal, defaultConfig } from 'https://esm.sh/@web3modal/ethers5'

        // 1. APNA PROJECT ID YAHAN DALEIN
        const projectId = '03a163dd191beb8051bf05273501ae42';

        // 2. Chain configuration (Mainnet)
        const mainnet = {
            chainId: 1,
            name: 'Ethereum',
            currency: 'ETH',
            explorerUrl: 'https://etherscan.io',
            rpcUrl: 'https://cloudflare-eth.com'
        }

        // 3. Modal configuration
        const metadata = {
            name: 'My Website',
            description: 'WalletConnect Test Page',
            url: 'https://mywebsite.com',
            icons: ['https://avatars.mywebsite.com/']
        }

        const modal = createWeb3Modal({
            ethersConfig: defaultConfig({ metadata }),
            chains: [mainnet],
            projectId,
            enableAnalytics: true // Optional
        })

        // UI Logic
        const connectBtn = document.getElementById('connect-btn');
        const statusBox = document.getElementById('status-box');
        const accountInfo = document.getElementById('account-info');
        const walletAddress = document.getElementById('wallet-address');

        connectBtn.addEventListener('click', async () => {
            try {
                await modal.open();
                
                // Connection check karne ke liye interval
                const checkConnection = setInterval(() => {
                    const address = modal.getAddress();
                    const isConnected = modal.getIsConnected();

                    if (isConnected && address) {
                        statusBox.className = "mb-4 p-2 text-sm rounded bg-green-100 text-green-700";
                        statusBox.innerText = "Connected!";
                        accountInfo.classList.remove('hidden');
                        walletAddress.innerText = address;
                        connectBtn.innerText = "Disconnect";
                        clearInterval(checkConnection);
                    }
                }, 1000);

            } catch (error) {
                console.error("Connection failed", error);
                alert("Check Console for Error");
            }
        });
    </script>
</body>
</html>

